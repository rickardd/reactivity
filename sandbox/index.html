<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sandbox</title>
    <script src="./app.js" type="module"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" />
    <link rel="stylesheet" href="./css/main.css" />
  </head>
  <body>
    <div class="grid">
      <div class="item-header">
        <h1>Raccoon JS</h1>
      </div>
      <div class="item-sidebar">
        <aside>
          <menu>
            <li><a href="#intro">Intro</a></li>
            <li><a href="#demo">Demo</a></li>
            <li><a href="#setup">Setup</a></li>
            <li><a href="#get-started">Get started</a></li>
            <li><a href="#template-engine">Template engine</a></li>
            <li><a href="#proxy">Proxy</a></li>
            <li><a href="#compute">Compute</a></li>
            <li><a href="#funcs">Funcs</a></li>
            <li><a href="#click">@click</a></li>
            <li><a href="#input">@input</a></li>
            <li><a href="#change">@change</a></li>
            <li><a href="#keyup">@keyup</a></li>
            <li><a href="#keydown">@keydown</a></li>
            <li><a href="#r-for">r-for</a></li>
            <li><a href="#r-model">r-model</a></li>
            <li><a href="#states/state-manager">States/state-manager</a></li>
            <li><a href="#multiple-components">Multiple components</a></li>
            <li><a href="#">Limitations</a></li>
          </menu>
        </aside>
      </div>
      <div class="item-main">
        <div id="app">
          <article class="example" id="intro">
            <h2>Intro</h2>
          </article>
          
          <article class="example" id="demo">
            <h2>Demo</h2>

            <button @click="funcs.getUsers()">Get Users</button>
          <br />
          <button @click="funcs.getProducts()">Get Products</button>
          <br />
          <br />
          <br />
          <button @click="proxy.price += 10">Count Up</button>
          <div>{{price}}</div>
          <div>{{quantity}}</div>
          <div>{{tax}}</div>
          <div>{{sum}}</div>
          <div>{{total}}</div>
          <div>
            <!-- JS (at least in chrome) auto assigns event in the addEventListener so we can use event here without assigning it -->
            <!-- both :value="tax" and :value="proxy.tax" are valid -->
            <label>
              <span>Price: </span>
              <input type="number" @input="proxy.price = Number(event.target.value)" :value="proxy.price" />
            </label>
          </div>
          <div>
            <label>
              <span>Tax: @input</span>
              <input type="number" @input="proxy.tax = Number(event.target.value)" :value="tax" />
            </label>
          </div>
          <div>
            <label>
              <span>Tax: @change</span>
              <input type="number" @change="proxy.tax = Number(event.target.value)" :value="tax" />
            </label>
          </div>
          <div>
            <label>
              <span>Tax: @keyup</span>
              <input type="number" @keyup="proxy.tax = Number(event.target.value)" :value="tax" />
            </label>
          </div>
          <div>
            <label>
              <span>Tax: @keydown</span>
              <input type="number" @keydown="proxy.tax = Number(event.target.value)" :value="tax" />
            </label>
          </div>
          <div>
            <label>
              <span>Tax: r-model</span>
              <input type="number" r-model="tax" />
            </label>
          </div>
          <!-- r-for -->
          <br />
          <strong>r-for</strong>
          <br />
          <button @click="proxy.names = [...proxy.names, 'Rick']">Add Rick</button>
          <button @click="proxy.names = [...proxy.names, 'Carl']">Add Carl</button>
          <button @click="proxy.names = [...proxy.names, 'Paula']">Add Paula</button>
          <button @click="proxy.names = [...proxy.names, 'Foxy']">Add Foxy</button>
          <br />
          <!-- A handler for this is required -->
          <button @click="delete proxy.names">Remove proxy.names</button>
          <!-- Triggers deleteProperty() -->
          <!-- Most methods of deleting does not trigger the proxy set event -->
          <!-- But splice works  -->
          <!-- For delete to work properly we need a proxy for each value in the array. -->
          <button @click="proxy.names = proxy.names.slice(1, proxy.names.length)">Delete First</button>
          <button @click="proxy.names = proxy.names.slice(0, -1)">Delete Last</button>
          <br />
          <ul r-for="name of names">
            <li>{{ name }}</li>
          </ul>
          <ul r-for="user of users">
            <!-- ToDo: The r-for does not handle objects e.g user.firstName. -->
            <li>{{ user }}</li>
          </ul>
          <pre><code class="language-markup"><!--<ul r-for="user of users">
  <li>{{ user }}</li>
</ul>--></code></pre>
          </article>

          <article class="example" id="setup">
            <h2>Setup</h2>

            <p>
              Install Raccoon [From where?],
              Import it
              use it.
            </p>

          </article>

          <article class="example" id="get-started">
            <h2>Get started</h2>

            <!-- 
              
              Continue here. 

              Add script ot a demo.js file
              The scope has to be unique e.g proxy: demoProxy
              Create an example that's using funcs, compute, proxy, r-for and r-model
              
            -->

            <div id="demo-component">
              <button @click="proxy.price += 10">Count Up</button>
              <button @click="proxy.quantity += 1">Count Up</button>
  
              <button @click="funcs.getUsers()">Get Users</button>
  
              <div>{{price}}</div>
              <div>{{quantity}}</div>
              <div>{{sum}}</div>

              <script>
                const componentEl = document.getElementById("demo-component");
    
                const { proxy, compute, funcs } = new Raccoon(componentEl);
    
                proxy.price = 5;
                proxy.quantity = 15;
    
                compute.sum = () => proxy.price * proxy.quantity;
              </script>
            </div>


          </article>

          <article class="example" id="template-engine">
            <h2>Template engine</h2>

            [ToDo] : Prevent JS to render the example.
            <pre><code class="language-markup"><!--<div id="component">
  <div id="valueA">{{a}}</div>
  <div id="valueB">{{b}}</div>
  <div id="sum">{{sum}}</div> 
</div>--></code></pre>
            
            Output
            <pre><code class="language-js"><!--1
2
Sum: 3--></code></pre>


            <pre><code class="language-js"><!--proxy.a = 1;
proxy.b = 2;
compute.sum = () => `$Sum: ${proxy.a + proxy.b}`;
            --></code></pre>

          </article>

          <article class="example" id="proxy">
            <h2>Proxy</h2>

            - {proxy.name} or {just name}

            The proxy does the heavy lifting when it comes to the reactivities. 
            It's basically an object with properties that will update the dom every-time a property changes.

            <pre><code class="language-js"><!--proxy.a = 1;
proxy.b = 2;--></code></pre>

              <pre><code class="language-markup"><!--<p>a = {proxy.a}, b = {proxy.b}</p>--></code></pre>

              <p>Output: a = 1, b = 2</p>

              <p><strong>TODO: Explain when proxy.a is needed and when it's ok to use just a.</strong></p>
          </article>

          <article class="example" id="compute">
            <h2>Compute</h2>

            <pre><code class="language-js"><!--compute.sum = () => proxy.a + proxy.b;

proxy.a = 12;
proxy.b = 12;--></code></pre>

          <p>Output the computed sum</p>
          <pre><code class="language-markup"><!--The sum of a and b is: <strong>{sum}</strong>--></code></pre>

          <p>Sum in this case will be 24</p>
            
          </article>

          <article class="example" id="funcs">
            <h2>Funcs</h2>

            <p>This creates a button which counts up proxy.a by one on click using a function.</p>

            <pre><code class="language-markup"><!--<div id="component">
  <button id="button" @click='funcs.myFn(proxy.a)'>Count Up</button>
</div>--></code></pre>

            <p>
              The funcs-function takes 2 arguments, the proxy which is magically applied by the framework and the value which in this case is passed as an argument from the @click event.
              In this example we are getting the value from proxy.a and then increase it by one and save it back.
            </p>

            <pre><code class="language-js"><!--proxy.a = 1;
// The first argument will always be the proxy which is applied by the framework.
funcs.myFn = (proxy, value) => {
  proxy.a = Number(value) + 1;
}--></code></pre>

          </article>

          <article class="example" id="click">
            <h2>@click</h2>

            This could be used with funcs too

            <pre><code class="language-markup"><!--<div id="component">
  <button id="button" @click='proxy.a += 10'>Count Up</button>
</div>--></code></pre>
            
            <pre><code class="language-js"><!--proxy.a = 0--></code></pre>

          </article>

          <article class="example" id="input">
            <h2>@input</h2>

            This could be used with funcs too
            
            <pre><code class="language-markup"><!--<div id="component">
  <label for="price">Price</label>
  <input type="number" @input="proxy.price = Number(event.target.value)" :value="proxy.price">
</div>--></code></pre>
            
            <pre><code class="language-js"><!--proxy.price = 1;--></code></pre>
          </article>

          <article class="example" id="change">
            <h2>@change</h2>
            
            <pre><code class="language-markup"><!--<div id="component">
  <label for="price">Price</label>
  <input type="number" @change="proxy.price = Number(event.target.value)" :value="proxy.price">
</div>--></code></pre>
            
            <pre><code class="language-js"><!--proxy.price = 1;--></code></pre>
          </article>

          <article class="example" id="keyup">
            <h2>@keyup</h2>
            
            <pre><code class="language-markup"><!--<div id="component">
  <label for="price">Price</label>
  <input type="number" @keyup="proxy.price = Number(event.target.value)" :value="proxy.price">
</div>--></code></pre>
            
            <pre><code class="language-js"><!--proxy.price = 1;--></code></pre>
          </article>
          
          <article class="example" id="keydown">
            <h2>@keydown</h2>
            
            <pre><code class="language-markup"><!--<div id="component">
  <label for="price">Price</label>
  <input type="number" @keydown="proxy.price = Number(event.target.value)" :value="proxy.price">
</div>--></code></pre>
            
            <pre><code class="language-js"><!--proxy.price = 1;--></code></pre>
          </article>

          <article class="example" id="r-for">
            <h2>r-for</h2>
            
            <pre><code class="language-markup"><!--<div id="component">
  <div r-for="name of names">
    <article class="card">
      <span class="text-red">{{ name }}<span>
    </article>
  </div>
</div>--></code></pre>
              
            <p>An inner wrapper is required for the rendering precess.</p>

<pre><code class="language-markup"><!--<div id="component">
  <div r-for="name of names">
    <article class="card">
      <span class="text-red">{{ name }}<span>
    </article>
  </div>
</div>--></code></pre>

            <p>Invalid r-for loop as inner wrapper is missing.</p>

<pre><code class="language-markup"><!--<div id="component">
  <div r-for="name of names">
    {{ name }}
</div>--></code></pre>

            <p>An r-for-key will be dynamically added to the markup which is required during the rendering process.</p>
                        
            <pre><code class="language-js"><!--proxy.names = ["Lisa", "Frank", "Steve"];--></code></pre>
          </article>

          <article class="example" id="r-model">
            <h2>r-model</h2>

            <pre><code class="language-markup"><!--<div id="component">
  <input id="input-el" type="number" r-model="proxy.price">
</div>--></code></pre>

            prefix with proxy is optional, above r-model could be used like this.

            <pre><code class="language-markup"><!--<div id="component">
  <input id="input-el" type="number" r-model="price">
</div>--></code></pre>


            <pre><code class="language-js"><!--proxy.price = 1;--></code></pre>
          </article>

          <article class="example" id="states/state-manager">
            <h2>states/state-manager</h2>

            <pre><code class="language-markup"><!----></code></pre>
                        
            <pre><code class="language-js"><!----></code></pre>
          </article>

          <article class="example" id="multiple-components">
            <h2>multiple components</h2>

            <p>Having multiple components works as expected, proxies, computes, functions all works withing the component scope. 
              Just ensure they are uniquely named as example shows. In this example proxy.a in component-1 is not the same as proxy.a in component-2.</p>

            <pre><code class="language-markup"><!--<div id="component-1">
  <button id="button" @click='proxy.a += 10'>Count Up</button>
</div>

<div id="component-2">
  <button id="button" @click='proxy.a += 10'>Count Up</button>
</div>--></code></pre>
                        
            <pre><code class="language-js"><!--const componentString1 = `<div id="component-1"><button id="button" @click='proxy.a += 10'>Count Up</button></div>`;
const componentString2 = `<div id="component-2"><button id="button" @click='proxy.a += 10'>Count Up</button></div>`;

const { appEl: appEl1, proxy: proxy1, compute: compute1 } = new Raccoon(document.getElementById(component-1));
const { appEl: appEl2, proxy: proxy2, compute: compute2 } = new Raccoon(document.getElementById(component-2));

proxy1.a = 1;
proxy2.a = 2;

compute1.withDollarSign = () => `$${proxy1.a}`;
compute2.withDollarSign = () => `$${proxy2.a}`;
--></code></pre>
          </article>

        </div>
      </div>
      <div class="item-footer">d</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/unescaped-markup/prism-unescaped-markup.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/toolbar/prism-toolbar.min.js"></script> -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script> -->
  </body>
</html>
